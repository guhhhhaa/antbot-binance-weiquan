# 核算2023-3-21盗币时加密货币的损失数量

# 总体损失，已经转为正值

**（由于加密货币的特性，数据均精确到小数点后 8 位，而不是按照法定货币的，小数点后 2 位）**

| 总计                        | 数量                 |
| --------------------------- | -------------------- |
| BTC（比特币，Bitcoin）      | 0.54071533           |
| ETH（以太币，Ethereum）     | 7.28538496           |
| BNB（币安币，Binance Coin） | 15.27034959          |
| ADA（艾达币，Cardano）      | 5,174.90000000       |
| MATIC（马蹄币，Polygon）    | 1,625.20000000       |
| DOGE（狗狗币，Dogecoin）    | 22,861.00000000      |
| DOT（波卡币，Polkadot）     | 216.70000000         |
| SHIB（柴犬币，Shiba Inu）   | 117,682,495.00000000 |

| 折算对应加密币种 | 折算BTC        | 折算ETH         | 折算BNB          | 折算USDT            |
| ---------------- | -------------- | --------------- | ---------------- | ------------------- |
| **总损失**       | **1.47026631** | **23.17893391** | **120.80218093** | **40,806.97671845** |

| 前计对应币种 | 人民币(CNY)<br />(以总账户显示损失计) | 美元(USD)<br />(以合约账户显示损失计) |
| ------------ | ------------------------------------- | ------------------------------------- |
| **总损失**   | 286417.56                             | 40856.89                              |

### 当事人可接受以下三种赔偿方案

**1，按照上表中 8 种货币，对应币种和数量赔偿，如下。**

**BTC：0.54071533    ETH：7.28538496**

**BNB：15.27034959    ADA：5,174.90000000**

**MATIC：1,625.20000000    DOGE：22,861.00000000**

**DOT：216.70000000    SHIB：117,682,495.00000000**

**2，按照当时价格，折算 BTC 赔偿，赔偿 1.47026631 BTC**

**3，按照当时价格，折算 ETH 赔偿，赔偿 23.17893391 ETH**

**注：由于距离发生时间超过7天，且加密货币价格波动剧烈。**

**因此，当事人受害者王天佑不接受 USDT 赔偿，也不接受人民币 CNY 赔偿。**



# 以下是计算总体损失的步骤

# 一，约定的正负号规范

损失/转出/卖出/手续费消耗/折算消耗，为负。

获得/转入/买入/折算获得，为正。

# 二，黑客出售的币种消耗

| 黑客出售 | 数量                  |
| -------- | --------------------- |
| BTC      | -0.00372000           |
| ETH      | -0.04650000           |
| BNB      | -0.03800000           |
| ADA      | -5,174.90000000       |
| MATIC    | -1,625.20000000       |
| DOGE     | -22,861.00000000      |
| DOT      | -216.70000000         |
| SHIB     | -117,682,495.00000000 |

# 三，黑客出售的手续费消耗

| 手续费 | 数量        |
| ------ | ----------- |
| BNB    | -0.00107279 |
| USDT   | -7.37736007 |

# 四，黑客出售的USDT获得

| 出售获得USDT | 数量           |
| ------------ | -------------- |
| USDT         | 8,013.07854790 |

# 五，黑客转出现货，到期货合约

| 转出现货 | 数量            |
| -------- | --------------- |
| USDT     | -8,064.10000000 |
| BNB      | -20.00000000    |
| ETH      | -7.50000000     |
| BTC      | -0.80000000     |

# 六，当事人受害者王天佑清空期货合约，转入现货

| 转入现货 | 数量         |
| -------- | ------------ |
| USDT     | 389.12007478 |
| BNB      | 4.71000000   |
| ETH      | 0.08988337   |
| BTC      | 0.26300467   |

# 七，以上，第一次汇总

| 合并结果 | 数量                  |
| -------- | --------------------- |
| 增量USDT | 330.72126261          |
| BTC      | -0.54071533           |
| ETH      | -7.45661663           |
| BNB      | -15.32907279          |
| ADA      | -5,174.90000000       |
| MATIC    | -1,625.20000000       |
| DOGE     | -22,861.00000000      |
| DOT      | -216.70000000         |
| SHIB     | -117,682,495.00000000 |

# 八，当事人受害者王天佑在合约期货进行了清算

| 清算期货          | 数量          |
| ----------------- | ------------- |
| USDT\_清算ETH获得 | 4313.76543875 |
| 清算的ETH         | -2.37578538   |
| USDT\_清算BNB获得 | 274.88775516  |
| 清算的BNB         | -0.81476584   |

# 九，将增量USDT折算成，清算前的BNB和ETH

### 1，折算公式的计算步骤

增量USDT\_占总清算获得比例 = 增量USDT/(USDT\_清算BNB获得 + USDT\_清算ETH获得)

ETH\_还原 = 增量USDT\_占总清算获得比例 \* ( -1 \* 清算的ETH)

BNB\_还原 = 增量USDT\_占总清算获得比例 \* ( -1 \* 清算的BNB)

注：由于要转变为 **USDT增量** 对应的 **ETH\_还原** 的增量和 **BNB\_还原** 的增量，所以乘一个 ( -1)

### 2，因此推出，折算公式如下

ETH\_还原 = -1 \* (增量USDT / (USDT\_清算BNB获得 + USDT\_清算ETH获得)) \* 清算的ETH

BNB\_还原 = -1 \* (增量USDT / (USDT\_清算BNB获得 + USDT\_清算ETH获得)) \* 清算的BNB

### 3，由上折算公式，折算得出

| USDT增量还原合约清算资产 | 数量        |
| ------------------------ | ----------- |
| ETH\_还原                | 0.171231668 |
| BNB_还原                 | 0.058723197 |

# 十，以上，第二次汇总

| 总计  | 数量                  |
| ----- | --------------------- |
| BTC   | -0.54071533           |
| ETH   | -7.28538496           |
| BNB   | -15.27034959          |
| ADA   | -5,174.90000000       |
| MATIC | -1,625.20000000       |
| DOGE  | -22,861.00000000      |
| DOT   | -216.70000000         |
| SHIB  | -117,682,495.00000000 |

### 转为正值后

| 总计                        | 数量                 |
| --------------------------- | -------------------- |
| BTC（比特币，Bitcoin）      | 0.54071533           |
| ETH（以太币，Ethereum）     | 7.28538496           |
| BNB（币安币，Binance Coin） | 15.27034959          |
| ADA（艾达币，Cardano）      | 5,174.90000000       |
| MATIC（马蹄币，Polygon）    | 1,625.20000000       |
| DOGE（狗狗币，Dogecoin）    | 22,861.00000000      |
| DOT（波卡币，Polkadot）     | 216.70000000         |
| SHIB（柴犬币，Shiba Inu）   | 117,682,495.00000000 |

###  按照当时卖出现货时的价格，将所有损失进行折算

折算对应币种数量 = 币种数量 * 币种价格 / 折算对应币种价格

当时价格，按照黑客当时进行现货交易时的价格计算。

| 折算对应币种 |  折算BTC   |   折算ETH   | 折算BNB      | 折算USDT        | 当时价格  |
| :----------: | :--------: | :---------: | ------------ | --------------- | :-------: |
|     BTC      | 0.54071533 | 8.52444542  | 44.42704753  | 15,007.45665539 | 27754.82  |
|     ETH      | 0.46212031 | 7.28538496  | 37.96940774  | 12,826.06593319 |  1760.52  |
|     BNB      | 0.18585327 | 2.93000028  | 15.27034959  | 5,158.32409238  |   337.8   |
|     ADA      | 0.06251685 | 0.98558606  | 5.13660145   | 1,735.14397000  |  0.3353   |
|    MATIC     | 0.06618539 | 1.04342101  | 5.43802120   | 1,836.96356000  |  1.1303   |
|     DOGE     | 0.05964243 | 0.94027049  | 4.90042928   | 1,655.36501000  |  0.07241  |
|     DOT      | 0.04871195 | 0.76794998  | 4.00234251   | 1,351.99130000  |   6.239   |
|     SHIB     | 0.04452078 | 0.70187569  | 3.65798164   | 1,235.66619750  | 0.0000105 |
|    总损失    | 1.47026631 | 23.17893391 | 120.80218093 | 40,806.97671845 |    --     |

# 附录，相关原始数据

注：以下时间是 UTC 时间，UTC是标准时区零时区，北京位于东八区时区，北京时间比 UTC 时间快八个小时。

UTC + 时区差 ＝ 本地时间， 时区差东为正，西为负。

如果将 UTC 时间，折算成北京时间，需要计算：北京时间 = UTC时间 + 8小时。

因此，事件发生时间(北京时间)，约为：2023-03-20  17:49:08 (UTC) + 8h = 2023-03-21  01:49:08 (北京时间)

### 附录1，现货交易数据（操作者，黑客）

| 时间(UTC)            | 市场      | 类型 | 价格      | 数量     | 成交额     | 手续费     | 手续费结算币种 |
| -------------------- | --------- | ---- | --------- | -------- | ---------- | ---------- | -------------- |
| 2023-03-20  17:49:08 | SHIBUSDT  | SELL | 0.0000105 | 4678166  | 49.120743  | 0.04912074 | USDT           |
| 2023-03-20  17:49:08 | SHIBUSDT  | SELL | 0.0000105 | 2723371  | 28.5953955 | 0.00006346 | BNB            |
| 2023-03-20  17:49:08 | SHIBUSDT  | SELL | 0.0000105 | 26386740 | 277.06077  | 0.27706077 | USDT           |
| 2023-03-20  17:49:08 | SHIBUSDT  | SELL | 0.0000105 | 83894218 | 880.889289 | 0.88088929 | USDT           |
| 2023-03-20  17:49:08 | DOTUSDT   | SELL | 6.239     | 166.94   | 1041.53866 | 1.04153866 | USDT           |
| 2023-03-20  17:49:08 | DOTUSDT   | SELL | 6.239     | 49.76    | 310.45264  | 0.31045264 | USDT           |
| 2023-03-20  17:49:08 | DOGEUSDT  | SELL | 0.07241   | 11176    | 809.25416  | 0.80925416 | USDT           |
| 2023-03-20  17:49:08 | DOGEUSDT  | SELL | 0.07241   | 1902     | 137.72382  | 0.00030568 | BNB            |
| 2023-03-20  17:49:08 | DOGEUSDT  | SELL | 0.07241   | 9783     | 708.38703  | 0.70838703 | USDT           |
| 2023-03-20  17:49:08 | MATICUSDT | SELL | 1.1303    | 509.4    | 575.77482  | 0.57577482 | USDT           |
| 2023-03-20  17:49:08 | MATICUSDT | SELL | 1.1303    | 919.1    | 1038.85873 | 1.03885873 | USDT           |
| 2023-03-20  17:49:08 | MATICUSDT | SELL | 1.1303    | 196.7    | 222.33001  | 0.00049347 | BNB            |
| 2023-03-20  17:49:08 | ADAUSDT   | SELL | 0.3353    | 5174.9   | 1735.14397 | 1.73514397 | USDT           |
| 2023-03-20  17:49:08 | BNBUSDT   | SELL | 337.8     | 0.038    | 12.8364    | 0.00002848 | BNB            |
| 2023-03-20  17:49:07 | ETHUSDT   | SELL | 1760.52   | 0.0465   | 81.86418   | 0.0001817  | BNB            |
| 2023-03-20  17:49:07 | BTCUSDT   | SELL | 27754.82  | 0.00372  | 103.24793  | 0          | BNB            |

### 附录2，合约划转数据（操作者，黑客）

| 时间(UTC)            | 类型     | 总量           | 计价资产 | 交易对 |
| -------------------- | -------- | -------------- | -------- | ------ |
| 2023-03-20  17:53:35 | 资金划转 | 8,005.60000000 | USDT     | --     |
| 2023-03-20  17:45:19 | 资金划转 | 58.50000000    | USDT     | --     |
| 2023-03-20  17:45:18 | 资金划转 | 20.00000000    | BNB      | --     |
| 2023-03-20  17:45:18 | 资金划转 | 7.50000000     | ETH      | --     |
| 2023-03-20  17:45:17 | 资金划转 | 0.80000000     | BTC      | --     |

### 附录3，合约清算数据（操作者，当事人受害者王天佑）

| 时间(UTC)            | 类型 | 总量          | 计价资产 | 交易对 |
| -------------------- | ---- | ------------- | -------- | ------ |
| 2023-03-21  13:37:24 |      | 4313.76543875 | USDT     | --     |
| 2023-03-21  13:37:24 |      | -2.37578538   | ETH      | --     |
| 2023-03-21  13:37:07 |      | 274.88775516  | USDT     | --     |
| 2023-03-21  13:37:07 |      | -0.81476584   | BNB      | --     |

### 附录4，合约划转数据（操作者，当事人受害者王天佑）（清空合约账户）

| 时间(UTC)            | 类型     | 总量          | 计价资产 | 交易对 |
| -------------------- | -------- | ------------- | -------- | ------ |
| 2023-03-21  13:37:48 | 资金划转 | -389.12007478 | USDT     | --     |
| 2023-03-21  03:21:53 | 资金划转 | -0.06000000   | BNB      | --     |
| 2023-03-21  03:21:21 | 资金划转 | -0.09000000   | ETH      | --     |
| 2023-03-21  03:21:03 | 资金划转 | -4.65000000   | BNB      | --     |
| 2023-03-21  03:11:41 | 资金划转 | 0.00011663    | ETH      | --     |
| 2023-03-21  03:06:19 | 资金划转 | -0.26300467   | BTC      | --     |

注：2023-03-21  03:11:41 (UTC) 资金划转  0.00011663  ETH，为正值，为我的操作失误。本来，当时我应该转入现货账户，太紧张，就转出了现货账户，但我也计入了以上计算中。划转不需要手续费。合约清算和划转，都是我的被动挽损操作，因此都计入了以上计算中。

注：合约交易都是黑客的自动交易操作，几千条打不下。用 Excel 函数公式 =SUMIF() 算，数量也溢出了，无法用 Excel 函数算。而且也与计算损失无关，因此不在本文档中体现。相关数据表格，可在以下链接下载。

https://github.com/guhhhhaa/antbot-binance-weiquan