

# 核算损失数量



# 正负号规范

从现货账户损失/转出/卖出/手续费消耗/折算消耗，为负。

现货账户获得/转入/买入/折算获得，为正。

# 黑客出售的币种消耗

| 黑客出售 | 数量                  |
| -------- | --------------------- |
| BTC      | -0.00372000           |
| ETH      | -0.04650000           |
| BNB      | -0.03800000           |
| ADA      | -5,174.90000000       |
| MATIC    | -1,625.20000000       |
| DOGE     | -22,861.00000000      |
| DOT      | -216.70000000         |
| SHIB     | -117,682,495.00000000 |

# 黑客出售的手续费消耗

| 手续费 | 数量        |
| ------ | ----------- |
| BNB    | -0.00107279 |
| USDT   | -7.37736007 |

# 黑客出售的USDT获得

| 出售获得USDT | 数量           |
| ------------ | -------------- |
| USDT         | 8,013.07854790 |

# 黑客转出现货，到期货合约：

| 转出现货 | 数量            |
| -------- | --------------- |
| USDT     | -8,064.10000000 |
| BNB      | -20.00000000    |
| ETH      | -7.50000000     |
| BTC      | -0.80000000     |

# 我从期货合约转入现货：

| 转入现货 | 数量         |
| -------- | ------------ |
| USDT     | 389.12007478 |
| BNB      | 4.71000000   |
| ETH      | 0.08988337   |
| BTC      | 0.26300467   |

# 以上，第一次汇总：

| 合并结果 | 数量                  |
| -------- | --------------------- |
| USDT     | 330.72126261          |
| BTC      | -0.54071533           |
| ETH      | -7.45661663           |
| BNB      | -15.32907279          |
| ADA      | -5,174.90000000       |
| MATIC    | -1,625.20000000       |
| DOGE     | -22,861.00000000      |
| DOT      | -216.70000000         |
| SHIB     | -117,682,495.00000000 |

# 又：我在合约期货进行了清算：

| 清算期货          | 数量          |
| ----------------- | ------------- |
| USDT\_清算ETH获得 | 4313.76543875 |
| 清算的ETH         | -2.37578538   |
| USDT\_清算BNB获得 | 274.88775516  |
| 清算的BNB         | -0.81476584   |

# 将增量USDT，折算为清算前的BNB和ETH

### 折算公式的计算步骤

增量USDT\_占总清算获得比例 = 增量USDT/(USDT\_清算BNB获得 + USDT\_清算ETH获得)

ETH部分的比例 = USDT\_清算ETH获得/(USDT\_清算BNB获得 + USDT\_清算ETH获得)

BNB部分的比例 = USDT\_清算BNB获得/(USDT\_清算BNB获得 + USDT\_清算ETH获得)

ETH\_还原 = 增量USDT\_占总清算获得比例 \* ETH部分的比例 \* ( -1 \* 清算的ETH)

BNB\_还原 = 增量USDT\_占总清算获得比例 \* BNB部分的比例 \* ( -1 \* 清算的BNB)

### 因此推出，折算公式如下

ETH\_还原 = -1 \* (增量USDT / (USDT\_清算BNB获得 + USDT\_清算ETH获得)) \* (USDT\_清算ETH获得 / (USDT\_清算BNB获得 + USDT\_清算ETH获得)) \* 清算的ETH

BNB\_还原 = -1 \* (增量USDT / (USDT\_清算BNB获得 + USDT\_清算ETH获得)) \* (USDT\_清算BNB获得 / (USDT\_清算BNB获得 + USDT\_清算ETH获得)) \* 清算的BNB

# 由上折算公式，折算得出

| USDT增量还原合约清算资产 | 数量        |
| ------------------------ | ----------- |
| ETH\_还原                | 0.160973868 |
| BNB\_还原                | 0.003517871 |

# 再次汇总得到

| 总计  | 数量                 |
| ----- | -------------------- |
| BTC   | 0.54071533           |
| ETH   | 7.29564276           |
| BNB   | 15.32555492          |
| ADA   | 5,174.90000000       |
| MATIC | 1,625.20000000       |
| DOGE  | 22,861.00000000      |
| DOT   | 216.70000000         |
| SHIB  | 117,682,495.00000000 |